<!-- -*- Mode: XML -*- -->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="common.xhtml"/>

  <head>
    <title>My Status</title>
  </head>
  <body class="nocols">
    <h2>Preferences</h2>

    <form action="${genlink('preferences')}" method="POST">
      <h3>Email</h3>

      <p><label for="bugmail">Bugzilla email</label>
        <input type="email" size="30" id="bugmail" name="bugmail" value="${(bugmail, userid)[bugmail is None]}" />
      </p>

      <p><label for="email">Alternate Delivery Address</label>
        <input type="email" size="30" id="email" name="email" value="${(email, '')[email is None]}" />
      </p>

      <p><label for="reminderday">Nagging</label>
        <select id="reminderday" name="reminderday"
                initialvalue="${('-', reminderday)[reminderday is not None]}">
          <option value="-">(No thanks)</option>
          <option value="0">Monday</option>
          <option value="1">Tuesday</option>
          <option value="2">Wednesday</option>
          <option value="3">Thursday</option>
          <option value="4">Friday</option>
        </select>
        <em>Send me a reminder email if I haven't posted in the last week.</em>
      </p>

      <p><label for="sendemail">Team Update Emails</label>
        <select id="sendemail" name="sendemail"
                initialvalue="${('-', sendemail)[sendemail is not None]}">
          <option value="-">(No thanks)</option>
          <option value="0">Immediately</option>
          <option value="1">Once a day</option>
          <option value="2">Once a week on Tuesday</option>
        </select>
      </p>

      <h3>Member of Projects</h3>

      <ul>
        <li py:for="project, current in projects">
          <label for="project_${project}">${project}</label>
          <input id="updateproject_${project}" type="hidden" name="updateproject_${project}" value="1"/>
          <input id="project_${project}" type="checkbox" name="project_${project}" value="1"
                 py:attrs="{'checked': current and 'checked' or ''}" />
        </li>
      </ul>

      <p><input type="submit" value="Save Preferences"/></p>

    </form>
    <form py:if="loginid is not None" action="${genlink('createproject')}"
          method="POST">
      <h3>Create a New Project</h3>
      <label for="projectname">Project name:</label>
      <input id="projectname" name="projectname" type="text" size="15"/>
      <input type="submit" value="Create Project"/>
    </form>

  </body>
</html>
